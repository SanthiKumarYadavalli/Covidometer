<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <!-- open graph tags for preview -->
  <meta property="og:title" content="Covidometer" />
  <meta property="og:description" content="You will get covid-19 live data worldwide" />
  <meta property="og:image" content="https://image.flaticon.com/icons/png/512/3096/3096582.png" />

  <title>Covidometer</title>

  <!-- Icon -->
  <link rel="icon" href="https://image.flaticon.com/icons/png/512/3096/3096582.png">

  <!-- Css Stylesheets -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <link rel="stylesheet" href="css/styles.css">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&family=Ubuntu:wght@700&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <script src="https://kit.fontawesome.com/aea2e7a38a.js" crossorigin="anonymous"></script>

  <!-- Bootstrap Scripts -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

  <!-- jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <!-- Plotly -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

</head>

<body>
  <section id="worldwide-data">
    <div class="container-fluid">
      <h1 class="title">Covid<i class="fas fa-virus"></i>meter</h1>

      <div class="row">
        <div class="col-md-6">
          <div class="total-cases">
            <h1 class="total-cases-title">Total Cases</h1>
            <h3 class="total-cases-num">{{ total_cases }}</h3>
          </div>
        </div>

        <div class="data-boxes col-md-6">
          <div class="data-box">
            <h1>Active Cases</h1>
            <h3 class="active-cases-num">{{ active_cases }}</h3>
          </div>

          <div class="data-box">
            <h1>Deaths</h1>
            <h3 class="deaths-num">{{ deaths }}</h3>
            <p class="deaths-num">{{ death_rate }}</p>
          </div>

          <div class="data-box">
            <h1>Recovered</h1>
            <h3 class="recovered-num">{{ recovered }}</h3>
            <p class="recovered-num">{{ recovery_rate }}</p>
          </div>
        </div>

      </div>
    </div>
    
  </section>


  <section id="graph-section">
    <div class="container-fluid graph-container">
        <div id="graph" class="graph"></div>
    </div>
    <script type="text/javascript">
        var graph = {{ graphJSON | safe }};
        Plotly.plot('graph',graph, {});   
    </script>
  </section>
  

  <section id="table-section">
    <div class="countries-table">
      <table class="table table-bordered table-hover table-responsive-lg">
        <thead class="thead-dark">
          {% for row_title in row_titles %}
              <th class="header" scope="col">{{ row_title }}</th>
          {% endfor %}
        </thead>

        {% for i in range(countries|count) %}
            {% if countries[i]['confirmed'] == countries[i]['recovered'] %}
                {% set row_class = 'table-success' %}
            {% elif countries[i]['active'] == 0 %}
                {% set row_class = 'table-secondary' %}
            {% endif %}

            <tr class="{{ row_class }}">
              <td>{{ i+1 }}</td>
              <td>{{ countries[i]['country'] }}</td>
              {% for key in keys %}

                  {% if key == 'new_cases' and countries[i][key] %}
                      {% set cell_class = 'table-warning' %}
                  {% elif key == 'new_deaths' and countries[i][key] %}
                      {% set cell_class = 'table-danger' %}
                  {% endif %}

                  <td class="{{ cell_class }}">{{ "{:,}".format(countries[i][key]) }}</td>
              {% endfor %}
            </tr>
        {% endfor %}

      </table>
    </div>
    <div style="margin-left: 10px;">
        <p><span style="background-color: #8fd19e; padding: 5px;">Green</span>: all cases have recovered from covid</p>
        <p><span style="background-color: #d6d8db; padding: 5px;">Grey</span>: all cases have had an outcome(there are no active cases)</p>
    </div>
    <span>Data From </span><a href="https://www.worldometers.info/coronavirus/" target="_blank">Worldometers</a>
  </section>

  

  <div class="footer">
    <h4>Covid<i class="fas fa-virus"></i>meter</h4>
    <p>Â© 2021 Santhi Kumar Yadavalli.</p>
  </div>

   <div class="loader-wrapper">
    <span class="loader"><i class="fas fa-virus fa-2x"></i></span>
  </div>

  <script>
      $(window).on("load", function(){
        $(".loader-wrapper").fadeOut("slow");
      });
  </script>


</body>
</html>
